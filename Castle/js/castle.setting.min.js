/**
   _____                 _     _        
  / ____|               | |   | |       
 | |        __ _   ___  | |_  | |   ___ 
 | |       / _` | / __| | __| | |  / _ \
 | |____  | (_| | \__ \ | |_  | | |  __/
  \_____|  \__,_| |___/  \__| |_|  \___|
 ----------------------------------------
 * Castle's Theme Setting JavaScript
 * Last Update: 2020/02/14 [0.9.0]
 * Author: ohmyga (https://ohmyga.cn)
 * GitHub: https://github.com/ohmyga233/castle-Typecho-Theme/
 * LICENSE: GPL V3 (https://www.gnu.org/licenses/gpl-3.0.html)
 **/
/* 偷偷用 MDUI 的 JQ 库应该没人看吧（小声 */
var $$=mdui.JQ;$$("body").prepend('<div id="moe-bg" style="background-image: url(\''+CastleConfig.bgurl+'\')">');var CastleLinkPanel={toggle:function(){if($$('#moe-theme-panel #moe-theme-panel-menu').hasClass('moe-menu-open')){this.close()}else{this.open()}},open:function(){$$('#moe-theme-panel .moe-quq').attr('src',CastleConfig.quq.open);$$('#moe-theme-panel #moe-theme-panel-menu')[0].style.display='block';setTimeout(function(){$$('#moe-theme-panel #moe-theme-panel-menu').addClass('moe-menu-open')},10)},close:function(){$$('#moe-theme-panel .moe-quq').attr('src',CastleConfig.quq.close);$$('#moe-theme-panel #moe-theme-panel-menu').removeClass('moe-menu-open');setTimeout(function(){$$('#moe-theme-panel #moe-theme-panel-menu')[0].style.display='none'},310)}};var CastlePanel={open:function(){for(let i=0;i<$$('.mdui-panel').length;++i){new mdui.Panel($$('.mdui-panel')[i]).openAll()}},close:function(){for(let i=0;i<$$('.mdui-panel').length;++i){new mdui.Panel($$('.mdui-panel')[i]).closeAll()}}};var CastleUpdate={AJAXGet:function(){if(!$$('#update-msg')[0]){return false}$$.ajax({method:'POST',url:'https://api.baka.show/themeUpdate/',data:'data='+$$('#update-data').data('up'),success:function(data){var data=JSON.parse(data);if(data.status=='ok'){$$('#update-msg').html(data.message);if(data.announcement.has){$$('#update-msg')[0].innerHTML+='<br/>'+data.announcement.message}}},error:function(xhr,status,error){$$('#update-msg').html('<span class="mdui-text-color-red-accent">API 发生错误 [HTTP'+xhr.status+']，无法获取更新信息。</span>')}})}};$$("body").prepend('<div id="moe-nav" style="height:46px;width:100%;display:none;"></div>');document.onscroll=function(){var h=document.documentElement.scrollTop||document.body.scrollTop;if(h>100){$$('.typecho-head-nav').addClass('moe-fixed');$$('.typecho-head-nav').addClass('moe-nav-animation');$$('#moe-nav').css('display','block')}if(h<100){$$('#moe-nav').css('display','none');$$('.typecho-head-nav').removeClass('moe-fixed');$$('.typecho-head-nav').removeClass('moe-nav-animation')}}