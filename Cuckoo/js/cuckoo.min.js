/**
 * .______    __    __       ___        ______
 * |   _  \  |  |  |  |     /   \      /  __  \
 * |  |_)  | |  |__|  |    /  ^  \    |  |  |  |
 * |   _  <  |   __   |   /  /_\  \   |  |  |  |
 * |  |_)  | |  |  |  |  /  _____  \  |  `--'  |
 * |______/  |__|  |__| /__/     \__\  \______/
 * 
 * Style
 * 
 * @author Bhao
 * @link https://dwd.moe/
 * @version 1.0.3
 */
getCookie=function(name){var name=name+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i].trim();if(c.indexOf(name)==0)return c.substring(name.length,c.length)}return false};if(getCookie('brightness')=='false'){$('#brightness i').html('brightness_2');$('body').addClass('mdui-theme-layout-dark')};setCookie=function(name,value,days,path){if(days===false){document.cookie=name+'='+value+';path='+path+';'}else{var exp=new Date();exp.setTime(exp.getTime()+days*24*60*60*1000);document.cookie=name+'='+value+';expires='+exp.toGMTString()+';path='+path+';'}};brightness=function(){if($('body').hasClass('mdui-theme-layout-dark')){setCookie('brightness','',30,'/');setTimeout(function(){$('#brightness i').html('brightness_5');$('body').removeClass('mdui-theme-layout-dark');mdui.snackbar({message:'已启用亮色模式',position:'right-bottom',timeout:1000})},300)}else if(!$('body').hasClass('mdui-theme-layout-dark')||getCookie('brightness')=='false'){setCookie('brightness',false,30,'/');setTimeout(function(){$('#brightness i').html('brightness_2');$('body').addClass('mdui-theme-layout-dark');mdui.snackbar({message:'已启用暗色模式',position:'right-bottom',timeout:1000})},300)}};hitokoto=function(){$.getJSON('https://v1.hitokoto.cn/?encode=json&select=%23hitokoto',function(json){$("#hitokoto").html(json.hitokoto)})};hitokoto();highlight=function(){$(document).ready(function(){$('pre code').each(function(i,block){hljs.highlightBlock(block)})});$("pre code").each(function(){$(this).html("<ol><li>"+$(this).html().replace(/\n/g,"\n</li><li>")+"\n</li></ol>")})};highlight();jqueryIAS=function(){var ias=jQuery.ias({container:".left",item:".page",pagination:".changePage"});ias.extension(new IASNoneLeftExtension({text:"到底了啦"}));ias.extension(new IASTriggerExtension({html:'<div class="ias-noneleft" style="text-align: center;">加载更多</div>',offset:2}));ias.on("rendered",function(items){$(".page-img").lazyload({effect:"fadeIn",threshold:200})})};jqueryIAS();linkTarget=function(){$('a:not([no-go]):not([target="_self"])').each(function(){var href=$(this).attr('href');var check=new RegExp("^"+document.location.protocol+"//"+window.location.host);if(!check.test(href)){$(this).attr('target','_blank')}})};linkTarget();$(function(){$(".top").hide();$(function(){$(window).scroll(function(){if($(window).scrollTop()>300){$(".top").fadeIn(300)}else{$(".top").fadeOut(200)}});$(".top").click(function(){$("body,html").animate({scrollTop:0},300);return false})})});var color=$(".mdui-text-color-theme").css("color");$('head').append("<style>.is-active-link::before{ background-color:"+color+" }#nprogress .bar{ background-color:"+color+"!important }.article-page h2::before {color: "+color+";}.article-page h3, .article-page h4, .article-page h5, .article-page h6 {border-left: 4px solid "+color+" !important;}#sticky{color:"+color+"}</style>");defaults=function(){if($("\u0023\u0063\u0075\u0063\u006b\u006f\u006f\u002d\u0063\u006f\u0070\u0079").length=0||$("\u0023\u0063\u0075\u0063\u006b\u006f\u006f\u002d\u0063\u006f\u0070\u0079").css('\u0064\u0069\u0073\u0070\u006c\u0061\u0079')=='\u006e\u006f\u006e\u0065'||$("\u0023\u0063\u0075\u0063\u006b\u006f\u006f\u002d\u0063\u006f\u0070\u0079").css('\u0076\u0069\u0073\u0069\u0062\u0069\u006c\u0069\u0074\u0079')=='\u0068\u0069\u0064\u0064\u0065\u006e'||$("\u0023\u0063\u0075\u0063\u006b\u006f\u006f\u002d\u0063\u006f\u0070\u0079").css('\u0076\u0069\u0073\u0069\u0062\u0069\u006c\u0069\u0074\u0079')=='\u0063\u006f\u006c\u006c\u0061\u0070\u0073\u0065'||$("\u0023\u0063\u0075\u0063\u006b\u006f\u006f\u002d\u0063\u006f\u0070\u0079").html()!='\u0054\u0068\u0065\u006d\u0065\u0020\u003c\u0061\u0020\u0068\u0072\u0065\u0066\u003d\u0022\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0067\u0069\u0074\u0068\u0075\u0062\u002e\u0063\u006f\u006d\u002f\u0062\u0068\u0061\u006f\u006f\u002f\u0063\u0075\u0063\u006b\u006f\u006f\u0022\u0020\u0074\u0061\u0072\u0067\u0065\u0074\u003d\u0022\u005f\u0062\u006c\u0061\u006e\u006b\u0022\u003e\u0043\u0075\u0063\u006b\u006f\u006f\u003c\u002f\u0061\u003e\u0020\u0062\u0079\u0020\u003c\u0061\u0020\u0068\u0072\u0065\u0066\u003d\u0022\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0064\u0077\u0064\u002e\u006d\u006f\u0065\u002f\u0022\u0020\u0074\u0061\u0072\u0067\u0065\u0074\u003d\u0022\u005f\u0062\u006c\u0061\u006e\u006b\u0022\u003e\u0042\u0068\u0061\u006f\u003c\u002f\u0061\u003e\uff5c\u0050\u006f\u0077\u0065\u0072\u0065\u0064\u0020\u0042\u0079\u0020\u003c\u0061\u0020\u0068\u0072\u0065\u0066\u003d\u0022\u0068\u0074\u0074\u0070\u003a\u002f\u002f\u0077\u0077\u0077\u002e\u0074\u0079\u0070\u0065\u0063\u0068\u006f\u002e\u006f\u0072\u0067\u0022\u0020\u0074\u0061\u0072\u0067\u0065\u0074\u003d\u0022\u005f\u0062\u006c\u0061\u006e\u006b\u0022\u003e\u0054\u0079\u0070\u0065\u0063\u0068\u006f\u003c\u002f\u0061\u003e'){$("\u002e\u006d\u0064\u0075\u0069\u002d\u0063\u0061\u0072\u0064\u002d\u0070\u0072\u0069\u006d\u0061\u0072\u0079\u002d\u0074\u0069\u0074\u006c\u0065").html("\u8bf7\u52ff\u5220\u9664\u002f\u4fee\u6539\u7248\u6743\uff0c\u8bf7\u5c0a\u91cd\u72ec\u7acb\u5f00\u53d1\u8005\u52b3\u52a8\u6210\u679c");$("\u002e\u006d\u0064\u0075\u0069\u002d\u0074\u0079\u0070\u006f\u002d\u0074\u0069\u0074\u006c\u0065").html("\u8bf7\u52ff\u5220\u9664\u002f\u4fee\u6539\u7248\u6743\uff0c\u8bf7\u5c0a\u91cd\u72ec\u7acb\u5f00\u53d1\u8005\u52b3\u52a8\u6210\u679c");$("\u0023\u0063\u0075\u0063\u006b\u006f\u006f\u002d\u0063\u006f\u0070\u0079").html("\u8bf7\u52ff\u5220\u9664\u002f\u4fee\u6539\u7248\u6743\uff0c\u8bf7\u5c0a\u91cd\u72ec\u7acb\u5f00\u53d1\u8005\u52b3\u52a8\u6210\u679c");$("\u002e\u006d\u0064\u0075\u0069\u002d\u0063\u0061\u0072\u0064\u002d\u0070\u0072\u0069\u006d\u0061\u0072\u0079\u002d\u0074\u0069\u0074\u006c\u0065").html("\u8bf7\u52ff\u5220\u9664\u002f\u4fee\u6539\u7248\u6743\uff0c\u8bf7\u5c0a\u91cd\u72ec\u7acb\u5f00\u53d1\u8005\u52b3\u52a8\u6210\u679c")}};commentReply=function(){var commentID=$('.comment-id').attr('id');window.TypechoComment={dom:function(id){return document.getElementById(id)},create:function(tag,attr){var el=document.createElement(tag);for(var key in attr){el.setAttribute(key,attr[key])}return el},reply:function(cid,coid){var comment=this.dom(cid),parent=comment.parentNode,response=this.dom(commentID),input=this.dom('comment-parent'),form='form'==response.tagName?response:response.getElementsByTagName('form')[0],textarea=response.getElementsByTagName('textarea')[0];if(null==input){input=this.create('input',{'type':'hidden','name':'parent','id':'comment-parent'});form.appendChild(input)}input.setAttribute('value',coid);if(null==this.dom('comment-form-place-holder')){var holder=this.create('div',{'id':'comment-form-place-holder'});response.parentNode.insertBefore(holder,response)}comment.appendChild(response);this.dom('cancel-comment-reply-link').style.display='';if(null!=textarea&&'text'==textarea.name){textarea.focus()}return false},cancelReply:function(){var response=this.dom(commentID),holder=this.dom('comment-form-place-holder'),input=this.dom('comment-parent');if(null!=input){input.parentNode.removeChild(input)}if(null==holder){return true}this.dom('cancel-comment-reply-link').style.display='none';holder.parentNode.insertBefore(response,holder);return false}}};commentReply();defaults();commentForm=function(){$("#comment-form").submit(function(){$('#submit').attr("disabled",true);var data=$("#comment-form").serialize();$.ajax({type:"POST",url:$(this).attr('action'),data:data,success:function success(back){var backC=back;var $$=mdui.JQ;var Obj=$("<body></body>").append($(backC));var $html=$(".containe",Obj);if($html.html()==null){$.pjax.reload({container:'#comment-list',fragment:'#comment-list',timeout:3000});$('#submit').attr("disabled",false);$('#comment-textarea').val('');mdui.snackbar({message:'评论成功！',position:'right-bottom'})}else{$('#submit').attr("disabled",false);mdui.snackbar({message:$html.html(),position:'right-bottom'})}}});return false})};commentForm();commentFormIMG=function(){$("#email").blur(function(){var email=$(this).val();var host=window.location.host;if(email!=""){$.ajax({type:"GET",data:{action:"ajax_avatar_get",form:host,email:email},success:function(src){$(".comments-avatar").attr("src",src)}})};return false})};commentFormIMG();pageToc=function(){if($('.toc').length>0){var headerEl='h1,h2,h3,h4',content='.article-page',idArr={};$(content).children(headerEl).each(function(){var headerId=$(this).text().replace(/[\s|\~|`|\!|\@|\#|\$|\%|\^|\&|\*|\(|\)|\_|\+|\=|\||\|\[|\]|\{|\}|\;|\:|\"|\'|\,|\<|\.|\>|\/|\?|\：|\，|\。]/g,'');headerId=headerId.toLowerCase();if(idArr[headerId]){$(this).attr('id',headerId+'-'+idArr[headerId]);idArr[headerId]++}else{idArr[headerId]=1;$(this).attr('id',headerId)}});tocbot.init({tocSelector:'.toc',contentSelector:content,headingSelector:headerEl,positionFixedSelector:'#toc',positionFixedClass:'is-position-fixed',scrollSmooth:true,scrollSmoothOffset:-80,headingsOffset:-50,})}};pageToc();tocOverlay=function(){$('#toc').removeClass('toc-show');$('.toc-overlay').removeClass('toc-overlay-open');setTimeout(function(){$('.toc-overlay').css('display','none')},310)};tocBotton=function(){$('#toc').css('display','block');$('.toc-overlay').css('display','block');setTimeout(function(){$('#toc').addClass('toc-show');$('.toc-overlay').addClass('toc-overlay-open')},10)};if(!$('#toc').length){$('#tocBotton').css('display','none')};jqLazyload=function(){jQuery(".article-pic").lazyload({threshold:200,effect:"fadeIn"});jQuery(".page-img").lazyload({threshold:200,effect:"fadeIn"});jQuery("#img").lazyload({threshold:200,effect:"fadeIn"})};jqLazyload();$(document).on('\u0070\u006a\u0061\u0078\u003a\u0063\u006f\u006d\u0070\u006c\u0065\u0074\u0065',function(){defaults()});submitPassword=function(){if(!$('form.protected')[0]){return false}if(!$('form.protected #protectPassword').val()){mdui.snackbar({message:'你倒是输入密码啊！',position:'right-bottom',onOpen:function(){document.querySelector('.mdui-snackbar').classList.add('mdui-color-red-400')}});return false}$.ajax({method:'POST',data:$('form.protected').serialize(),url:$('form.protected').attr('action'),success:function(data){var data=$("<body></body>").append($(data));var html=$("title",data);if(html.html()=="Error"){mdui.snackbar({message:'验证失败！<br>原因：['+$(".container",data).html()+']',position:'right-bottom',onOpen:function(){document.querySelector('.mdui-snackbar').classList.add('mdui-color-red-400')}})}else{mdui.snackbar({message:'密码正确，重载页面中...',position:'right-bottom',onOpen:function(){document.querySelector('.mdui-snackbar').classList.add('mdui-color-green-600')}});$.pjax.reload('.article-page')}}})};passwordStyle=function(){if(!$('form.protected')[0]){return false}$('form.protected').attr('onKeyDown','if(event.keyCode == 13){return false;}');$('form.protected')[0].innerHTML='<div class="mdui-textfield mdui-textfield-floating-label">   <label class="mdui-textfield-label">请输入密码访问</label>   <input class="mdui-textfield-input" name="protectPassword" id="protectPassword" type="password"/>  </div>  <button class="mdui-btn mdui-btn-icon mdui-color-theme-accent mdui-ripple mdui-btn-raised" type="button" onclick="submitPassword()"><i class="mdui-icon material-icons">&#xe876;</i></button>'};passwordStyle();$(document).pjax('a[href^="'+document.location.protocol+'//'+window.location.host+'/"]:not(a[target="_blank"], a[no-pjax])',{container:'.container',fragment:'.container',timeout:15000}).on('pjax:send',function(){if($('.toc').length)tocbot.destroy();NProgress.start()}).on('pjax:success',mdui.mutation()).on('pjax:complete',function(){hitokoto();commentReply();commentFormIMG();commentForm();highlight();jqLazyload();jqueryIAS();linkTarget();passwordStyle();if($('#toc').length){pageToc();if($(window).width()<900){$('#tocBotton').css('display','block')}}else{$('#tocBotton').css('display','none')}if($('.seirin-bilibili-page').length){open()};new mdui.Drawer('#menu').close();mdui.mutation(mdui.JQ('#emoji'));NProgress.done()}).on('pjax:beforeReplace',function(){$.ias().destroy()}).on('pjax:end',function(){$.ias().reinitialize()});console.log(" %c \u0043\u0075\u0063\u006b\u006f\u006f %c \u0042\u0079\u0020\u0042\u0068\u0061\u006f\u0020\u007c\u0020\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0064\u0077\u0064\u002e\u006d\u006f\u0065\u002f","color: #FFFFFF; background: #FF4081; padding:6px;","color: #FFFFFF; background: #424242; padding:6px;");Smilies={domId:function(id){return document.getElementById(id)},domTag:function(id){return document.getElementsByTagName(id)[0]},grin:function(tag){tag=' '+tag+' ';myField=this.domId("comment-textarea");document.selection?(myField.focus(),sel=document.selection.createRange(),sel.text=tag,myField.focus()):this.insertTag(tag)},insertTag:function(tag){myField=Smilies.domId("comment-textarea");myField.selectionStart||myField.selectionStart=="0"?(startPos=myField.selectionStart,endPos=myField.selectionEnd,cursorPos=startPos,myField.value=myField.value.substring(0,startPos)+tag+myField.value.substring(endPos,myField.value.length),cursorPos+=tag.length,myField.focus(),myField.selectionStart=cursorPos,myField.selectionEnd=cursorPos):(myField.value+=tag,myField.focus())}};